# Hauptsteuerung der proxmox_lxc Rolle
# Ruft alle Teilaufgaben in der korrekten Reihenfolge auf

- name: "Vorbereitung und Validierung"
  block:
    - name: "Container-ID Management"
      include_tasks: id_management.yml
    - name: "Container-Validierung"
      include_tasks: validation.yml

- name: "Container Deployment"
  block:
    - name: "Container-Erstellung"
      include_tasks: container_create.yml
    - name: "Container-Start und Info"
      include_tasks: container_start.yml

- name: "Container Konfiguration"
  block:
    - name: "Container Setup"
      include_tasks: container_setup.yml
      when: container_setup_enabled | default(true)

- name: "SSH Konfiguration"
  block:
    - name: "SSH Banner Setup"
      include_tasks: ssh_banner_setup.yml
      when: container_setup_enabled | default(true)

- name: "Manual UniFi Registration Info"
  include_tasks: unify_manual.yml
  when: show_unify_commands | default(true)
